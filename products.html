<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>product details</title>

    <link rel="stylesheet" href="./productnav/productnav.css">
    <style>
        #pdata
        {
            display: grid;
            grid-template-columns: 30% 30% 30%;
            width: 90%;
            padding-top: 13%;
            margin-left: 7%;
        }
        #pdata > div
        {
            height:fit-content;
            width:fit-content;
            padding-right: 15%;
            padding-left: 15%;
        }
        #pdata > div > img
        {
            height: 90%;
            width: 90%;
            margin-left: 5%;
        }
    </style>
</head>
<body>
    
    <div id="container">
    </div>
    
    <div id="pdata">
    </div>
</body>
</html>

<script type="module">

import data from "./Data/products.data.js";
import nav from "./productnav/productnav.js";

var container = document.getElementById("container");
container.innerHTML = nav() ;


var pdata = document.getElementById("pdata");

    data.forEach( i => 
    {
        
        
        console.log(i);
        let div = document.createElement("div");
    
        let img = document.createElement("img");
        let title = document.createElement("p");
        let subtitle = document.createElement("p");
        let price = document.createElement("p");
        
        img.src = i.displayimg;
        title.innerText = i.title;
        subtitle.innerText = i.subtitle;
        price.innerHTML = i.price;

        div.append(img,title,subtitle,price);

        div.onclick = function()
                {
                    if(localStorage.getItem("pdetails")===null)
                    {
                        localStorage.setItem("pdetails",JSON.stringify([]));
                    }
                    
                    let movieuser =JSON.parse(localStorage.getItem("pdetails"));
                    
                    movieuser.pop()
                    movieuser.push(i);

                    localStorage.setItem("pdetails",JSON.stringify (movieuser));
                    
                    window.location.href = "productdetails.html";

                }

        pdata.append(div);
        
    });

    var makeup = document.getElementById("makeup");
    makeup.onclick = function()
    {
        pdata.innerHTML = null;

        data.forEach(i =>
        {
            if(i.category == "makeup")
            {
                console.log(i);

                let div = document.createElement("div");
        
                let img = document.createElement("img");
                let title = document.createElement("p");
                let subtitle = document.createElement("p");
                let price = document.createElement("p");
                
                img.src = i.displayimg;
                title.innerText = i.title;
                subtitle.innerText = i.subtitle;
                price.innerHTML = i.price;

                div.append(img,title,subtitle,price);

                div.onclick = function()
                {
                    if(localStorage.getItem("pdetails")===null)
                    {
                        localStorage.setItem("pdetails",JSON.stringify([]));
                    }
                    
                    let movieuser =JSON.parse(localStorage.getItem("pdetails"));
                    
                    movieuser.pop()
                    movieuser.push(i);

                    localStorage.setItem("pdetails",JSON.stringify (movieuser));
                    
                    window.location.href = "productdetails.html";

                }

                pdata.append(div);
                
            }
        });
    }

    var collection = document.getElementById("collection");
    collection.onclick = function()
    {
        window.location.href = "products.html";
    }

</script>